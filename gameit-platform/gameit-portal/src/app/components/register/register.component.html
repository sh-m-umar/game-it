<div class="" style="text-align: center; padding-top: 40px">
  <a href="/" class="brand">
    <img
      src="assets/images/gameit-logo-medium.png"
      alt=""
      width="200"
      height="40"
      class="brand-logo-dark"
    />
  </a>
</div>

<!-- Form Step 1 -->

<div class="col-md-12 p-3" *ngIf="formStep == 1">
  <div class="register card card-container">
    <img
      *ngIf="!isSuccessful"
      id="profile-img"
      src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"
      class="profile-img-card"
    />
    <h4 *ngIf="!isSuccessful" style="text-align: center" translate>_Signup</h4>
    <form
      *ngIf="!isSuccessful"
      name="form"
      (ngSubmit)="f.form.valid && firstFormSubmit()"
      #f="ngForm"
      novalidate
    >
      <div class="form-group">
        <label for="role" translate>_Role</label>
        <div>
          <input
            type="radio"
            id="teacher"
            name="form.role"
            [(ngModel)]="form.role"
            value="TEACHER"
            #role="ngModel"
            required
          />
          <label style="display: inline; margin-left: 5px" for="teacher"
            >Teacher</label
          ><br />
          <input
            type="radio"
            id="guardian"
            name="form.role"
            [(ngModel)]="form.role"
            value="GUARDIAN"
            #role="ngModel"
          />
          <label style="display: inline; margin-left: 5px" for="guardian"
            >Guardian</label
          ><br />
          <input
            type="radio"
            id="schoolAdmin"
            name="form.role"
            [(ngModel)]="form.role"
            value="SCHOOL_ADMIN"
            #role="ngModel"
          />
          <label style="display: inline; margin-left: 5px" for="schoolAdmin"
            >School Admin</label
          >
        </div>

        <div class="alert-danger" *ngIf="role.errors && f.submitted">
          <div *ngIf="role.errors['required']" translate>_Role_Required</div>
        </div>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block" translate>
          _Next_Button
        </button>
      </div>

      <div
        class="alert alert-warning"
        *ngIf="f.submitted && isSignUpFailed"
        translate
      >
        _Signup_Failed<br />{{ errorMessage }}
      </div>
      <div class="haGqRf">
        <ul>
          <li>
            <a id="already-have-an-account" href="/login"
              ><span translate>_Signup_Login</span></a
            >
          </li>
        </ul>
      </div>
    </form>

    <div
      class="alert alert-success"
      style="text-align: center"
      *ngIf="isSuccessful"
    >
      <section class="sc-eNQAEJ haVFxc" role="main">
        <div class="sc-jKJlTe jPieqz">
          <h4 translate>_Signup_Success</h4>
        </div>
        <div id="email-sent-page">
          <div class="sc-cHGsZl crTHGb">
            <img
              style="width: 100px; margin: 10px"
              id="email-img"
              src="assets/images/verify-email.png"
              class="email-img"
            />
          </div>
          <div class="sc-TOsTZ fHxUUE">
            <p translate>_Signup_Success_Proceed</p>
          </div>
          <p class="sc-cJSrbW hLZUCD">{{ userEmail }}</p>
          <p class="sc-cJSrbW hLZUCD" style="color: red">
            * Please also check your spam / junk / promotion folders
          </p>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- From Step 2 -->

<div class="col-md-12 p-3" *ngIf="formStep == 2">
  <div class="register card card-container">
    <img
      *ngIf="!isSuccessful"
      id="profile-img"
      src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"
      class="profile-img-card"
    />
    <h4 *ngIf="!isSuccessful" style="text-align: center" translate>_Signup</h4>
    <form
      *ngIf="!isSuccessful"
      name="form"
      (ngSubmit)="f.form.valid && secondFormSubmit()"
      #f="ngForm"
      novalidate
    >
      <div>
        <div class="form-group" style="float: left; margin-right: 20px">
          <label for="firstname" translate>_Signup_Firstname</label>
          <input
            type="text"
            class="form-control"
            name="firstname"
            [(ngModel)]="form.firstname"
            required
            minlength="3"
            maxlength="200"
            #firstname="ngModel"
          />
          <div class="alert-danger" *ngIf="firstname.errors && f.submitted">
            <div *ngIf="firstname.errors['required']" translate>
              _Signup_Firstname_Required
            </div>
            <div *ngIf="firstname.errors['minlength']" translate>
              _Signup_Firstname_Alert
            </div>
          </div>
        </div>
        <div class="form-group" style="float: left">
          <label for="lastname" translate>_Signup_Lastname</label>
          <input
            type="text"
            class="form-control"
            name="lastname"
            [(ngModel)]="form.lastname"
            required
            minlength="3"
            maxlength="200"
            #lastname="ngModel"
          />
          <div class="alert-danger" *ngIf="lastname.errors && f.submitted">
            <div *ngIf="lastname.errors['required']" translate>
              _Signup_Lastname_Required
            </div>
            <div *ngIf="lastname.errors['minlength']" translate>
              _Signup_Lastname_Alert
            </div>
          </div>
        </div>
      </div>
      <div class="form-group" style="clear: both">
        <label for="username" translate>_Signup_Username</label>
        <input
          type="text"
          class="form-control"
          name="username"
          [(ngModel)]="form.username"
          required
          minlength="3"
          maxlength="200"
          #username="ngModel"
        />
        <div class="alert-danger" *ngIf="username.errors && f.submitted">
          <div *ngIf="username.errors['required']" translate>
            _Signup_Username_Required
          </div>
          <div *ngIf="username.errors['minlength']" translate>
            _Signup_Username_Alert
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="email" translate>_Signup_Email</label>
        <input
          type="email"
          class="form-control"
          name="email"
          [(ngModel)]="form.email"
          required
          email
          #email="ngModel"
        />
        <div class="alert-danger" *ngIf="email.errors && f.submitted">
          <div *ngIf="email.errors['required']" translate>
            _Signup_Email_Required
          </div>
          <div *ngIf="email.errors['email']" translate>_Signup_Email_Alert</div>
        </div>
      </div>
      <div class="form-group" style="clear: both">
        <label for="country" translate>_Country</label>
        <form class="example-form">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            style="display: block"
          >
            <input
              type="text"
              placeholder="Pick Country"
              matInput
              [formControl]="country"
              [matAutocomplete]="autoCountry"
            />
            <mat-autocomplete
              autoActiveFirstOption
              #autoCountry="matAutocomplete"
            >
              <mat-option
                *ngFor="let option of filteredCountries | async"
                [value]="option.name"
              >
                {{ option.name }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </form>
        <div class="alert-danger" *ngIf="country.errors && f.submitted">
          <div *ngIf="country.errors['required']" translate>
            _Country_Required
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="password" translate>_Signup_Password</label>
        <input
          type="password"
          class="form-control"
          name="password"
          [(ngModel)]="form.password"
          required
          #password="ngModel"
          pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
        />

        <div class="alert-danger" *ngIf="password.errors && f.submitted">
          <div *ngIf="password.errors['required']" translate>
            _Signup_Password_Required
          </div>
          <div
            class="alert alert-danger"
            role="alert"
            *ngIf="password.errors['pattern']"
            translate
          >
            _Signup_Password_Alert
          </div>
        </div>
      </div>
      <div class="form-group">
        <label
          class="form-check-label"
          style="margin-right: 20px; margin-left: 20px"
          translate
          ><input
            type="checkbox"
            class="form-check-input"
            style="margin-right: -20px"
            value="false"
            name="read_terms"
            [(ngModel)]="form.read_terms"
            required
            #read_terms="ngModel"
          />_Signup_Terms_Agree
          <a href="/terms" target="_blank" translate
            >_Signup_Terms_Conditions</a
          ></label
        >
        <div class="alert-danger" *ngIf="read_terms.errors && f.submitted">
          <div *ngIf="read_terms.errors['required']" translate>
            _Signup_Terms_Required
          </div>
        </div>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block" (click)="moveToPreviousStep(1)" translate>
          _Back_Button
        </button>
        <button *ngIf="['TEACHER', 'SCHOOL_ADMIN'].includes(form.role)" class="btn btn-primary btn-block" translate>
          _Next_Button
        </button>
        <button *ngIf="!['TEACHER', 'SCHOOL_ADMIN'].includes(form.role)" class="btn btn-primary btn-block" translate>
          _Signup_Button
        </button>
      </div>

      <div
        class="alert alert-warning"
        *ngIf="f.submitted && isSignUpFailed"
        translate
      >
        _Signup_Failed<br />{{ errorMessage }}
      </div>
      <div class="haGqRf">
        <ul>
          <li>
            <a id="already-have-an-account" href="/login"
              ><span translate>_Signup_Login</span></a
            >
          </li>
        </ul>
      </div>
    </form>
  </div>
</div>

<!-- From Step 3 -->

<div class="col-md-12 p-3" *ngIf="formStep == 3">
  <div class="register card card-container">
    <img
      *ngIf="!isSuccessful"
      id="profile-img"
      src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"
      class="profile-img-card"
    />
    <h4 *ngIf="!isSuccessful" style="text-align: center" translate>_Signup</h4>
    <form
      *ngIf="!isSuccessful"
      name="form"
      (ngSubmit)="f.form.valid && onSubmit()"
      #f="ngForm"
      novalidate
    >
      <div>
        <div class="form-group" style="clear: both">
          <label for="country" translate>_Signup_School</label>
          <form class="example-form">
            <mat-form-field
              class="example-full-width"
              appearance="fill"
              style="display: block"
            >
              <input
                type="text"
                placeholder="Pick School"
                matInput
                required="true"
                [formControl]="school"
                [matAutocomplete]="autoCountry"
              />
              <mat-autocomplete
                autoActiveFirstOption
                #autoCountry="matAutocomplete"
              >
                <mat-option
                  *ngFor="let option of filteredSchools | async"
                  [value]="option.name"
                >
                <span (click)="setCity(option)">
                  {{ option.name }}
                  <small>( {{option.city}}, {{option.country.name}} )</small>
                </span>
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </form>
          <div class="alert-danger" *ngIf="school.errors && f.submitted">
            <div *ngIf="school.errors['required']" translate>
              _Signup_School_Required
            </div>
          </div>
        </div>
        <!-- <div class="form-group">
          <label for="school" translate>_Signup_School</label>
          <input
            type="text"
            class="form-control"
            name="school"
            [(ngModel)]="form.school"
            required
            minlength="3"
            maxlength="200"
            #school="ngModel"
          />
          <div class="alert-danger" *ngIf="school.errors && f.submitted">
            <div *ngIf="school.errors['required']" translate>
              _Signup_School_Required
            </div>
            <div *ngIf="school.errors['minlength']" translate>
              _Signup_School_Alert
            </div>
          </div>
        </div> -->
        <div class="form-group">
          <label for="city" translate>_Signup_City</label>
          <input
            type="text"
            class="form-control"
            name="city"
            [(ngModel)]="form.city"
            required
            minlength="3"
            maxlength="200"
            #city="ngModel"
            [disabled]="form.school.schoolId"
          />
          <div class="alert-danger" *ngIf="city.errors && f.submitted">
            <div *ngIf="city.errors['required']" translate>
              _Signup_City_Required
            </div>
            <div *ngIf="city.errors['minlength']" translate>
              _Signup_City_Alert
            </div>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label
          class="form-check-label"
          style="margin-right: 20px; margin-left: 20px"
          translate
          ><input
            type="checkbox"
            class="form-check-input"
            style="margin-right: -20px"
            value="false"
            name="read_terms"
            [(ngModel)]="form.read_terms"
            required
            #read_terms="ngModel"
          />_Signup_Terms_Agree
          <a href="/terms" target="_blank" translate
            >_Signup_Terms_Conditions</a
          ></label
        >
        <div class="alert-danger" *ngIf="read_terms.errors && f.submitted">
          <div *ngIf="read_terms.errors['required']" translate>
            _Signup_Terms_Required
          </div>
        </div>
      </div>

      <div class="form-group">
        <button class="btn btn-primary btn-block" (click)="moveToPreviousStep(2)" translate>
          _Back_Button
        </button>
        <button class="btn btn-primary btn-block" translate>
          _Signup_Button
        </button>
      </div>

      <div
        class="alert alert-warning"
        *ngIf="f.submitted && isSignUpFailed"
        translate
      >
        _Signup_Failed<br />{{ errorMessage }}
      </div>
      <div class="haGqRf">
        <ul>
          <li>
            <a id="already-have-an-account" href="/login"
              ><span translate>_Signup_Login</span></a
            >
          </li>
        </ul>
      </div>
    </form>
  </div>
</div>

<!-- Verify Email -->

<div *ngIf="isSuccessful" class="col-md-12 p-3">
  <div class="register card card-container">
    <img
      *ngIf="!isSuccessful"
      id="profile-img"
      src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"
      class="profile-img-card"
    />
    <div>
      <app-verify-email [username]="userEmail"></app-verify-email>
    </div>
  </div>
</div>